@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@this()

@(params: NotificationBanner)
@import params._

@bannerRole = @{ role  match {
    case Some(br) => br
    case None =>
        if (bannerType.contains("success")) "alert"
        else "region"
    }
}

@titleContent = @{
    if (title.nonEmpty) title
    else {
        if (bannerType.contains("success")) Text("Success") else Text("Important")
    }
}

@headingLevel = @{
    titleHeadingLevel.getOrElse(2)
}

@headingAndTitleId = @{
    titleId.getOrElse("govuk-notification-banner-title")
}

@bannerContent = @{
    content match {
        case htmlContent: HtmlContent => htmlContent.asHtml
        case textContent: Text        => <p class="govuk-notification-banner__heading">{textContent.value}</p>
        case emptyContent             => <p class="govuk-notification-banner__heading"></p>
    }}

<div class="govuk-notification-banner@{if(classes.isDefined)" " + classes.get}@{if(bannerType.contains("success"))" govuk-notification-banner--success"}"
    role="@{bannerRole}"
    aria-labelledby="@{headingAndTitleId}"
    data-module="govuk-notification-banner"@if(disableAutoFocus.getOrElse(false)){ data-disable-auto-focus="true"}@toAttributes(attributes)>
    <div class="govuk-notification-banner__header">
        <h@headingLevel class="govuk-notification-banner__title" id="@{headingAndTitleId}">
            @{titleContent.asHtml}
        </h@headingLevel>
    </div>
    <div class="govuk-notification-banner__content">
        @bannerContent
    </div>
</div>


